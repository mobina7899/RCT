var MotaAdmin = (function () {
    var e = $(window).width(),
        n = function () {
            $("#preloader").fadeOut(1500),
                setTimeout(function () {
                    $("#main-wrapper").addClass("show");
                }, 1500);
        };
    a = function () {
        jQuery(".menu-tabs .nav-link").on("click", function () {
            jQuery(this).hasClass("open")
                ? (jQuery(this).removeClass("open"),
                    jQuery(".fixed-content-box").removeClass("active"),
                    jQuery(".hamburger").show())
                : (jQuery(".menu-tabs .nav-link").removeClass("open"),
                    jQuery(".fixed-content-box").addClass("active"),
                    jQuery(this).addClass("open"),
                    jQuery(".hamburger").hide());
        }),
            jQuery(".close-fixed-content").on("click", function () {
                jQuery(".fixed-content-box").removeClass("active"),
                    jQuery(".hamburger").removeClass("is-active"),
                    jQuery("#main-wrapper").removeClass("menu-toggle"),
                    jQuery(".hamburger").show(),
                    jQuery(".menu-tabs .nav-link").removeClass("open");
            });
    };

    return {
        init: function () {
            var e;
            // t(),
            a(),
                n(),
            jQuery("#menu").length > 0 && $("#menu").metisMenu(),
                jQuery(".metismenu > .mm-active ").each(function () {
                    !jQuery(this).children("ul").length > 0 &&
                    jQuery(this).addClass("active-no-child");
                }),
                $("#checkAll").on("change", function () {
                    $("td input:checkbox, .custom-checkbox input:checkbox").prop(
                        "checked",
                        $(this).prop("checked")
                    );
                }),
                $(".nav-control").on("click", function () {
                    $("#main-wrapper").toggleClass("menu-toggle"),
                        $(".hamburger").toggleClass("is-active");
                });
        },
        load: function () {
            // t(),
            n();
        },
        resize: function () {
            e = $(window).width();
        },
    };
})();
jQuery(document).ready(function () {
    "use strict";
    MotaAdmin.init();
}),
    jQuery(window).on("load", function () {
        "use strict";
        MotaAdmin.load();
    }),
    jQuery(window).on("resize", function (event) {
        "use strict";
        MotaAdmin.resize();

        let flag = true;
        if (
            window.innerWidth <= 992 &&
            $(".fixed-content-box").hasClass("active") &&
            flag
        ) {
            $(".fixed-content-box").removeClass("active");
            $(".menu-tabs .nav-link").removeClass("open");
            $(".hamburger").css("display", "block");
            flag = false;
        }

        if (window.innerWidth >= 768 && !flag) {
            flag = true;
        }
    });

// ============= upload file =================

$(document).ready(function () {
    $("#upload-file").change(function () {
        var filename = $(this).val();
        $("#file-upload-name").html(filename);
        if (filename != "") {
            setTimeout(function () {
                $(".upload-wrapper").addClass("uploaded");
            }, 600);
            setTimeout(function () {
                $(".upload-wrapper").removeClass("uploaded");
                $(".upload-wrapper").addClass("success");
            }, 1600);
        }
    });
});

// ==================== checkList control ==================

$(document).ready(function () {
    $(".checkList-item .checkList-item-group input[type=checkbox]").on(
        "change",
        function (event) {
            if ($(this).prop("checked")) {
                $(this)
                    .parent()
                    .next(".checkList-item-single")
                    .find("input[type=checkbox]")
                    .prop("checked", true);
            } else {
                $(this)
                    .parent()
                    .next(".checkList-item-single")
                    .find("input[type=checkbox]")
                    .prop("checked", false);
            }
        }
    );

    $(".checkList-item .checkList-item-single input[type=checkbox]").on(
        "change",
        function (event) {
            let checkFlag = true;
            $(this)
                .parents(".checkList-item-single")
                .find("input[type=checkbox]")
                .each((index, item) => {
                    checkFlag = checkFlag && $(item).prop("checked");
                });

            if (checkFlag) {
                $(this)
                    .parents(".checkList-item-single")
                    .siblings(".checkList-item-group")
                    .find("input[type=checkbox]")
                    .prop("checked", true);
            } else {
                $(this)
                    .parents(".checkList-item-single")
                    .siblings(".checkList-item-group")
                    .find("input[type=checkbox]")
                    .prop("checked", false);
            }
        }
    );
});


$(document).ready(function (){
    $(".close-modal").on("click",function (event){
        $(this).parents(".modal").modal("hide");
    });
});

$(document).ready(function (){
    $(".close").on("click",function (event){
        $(this).parents(".modal").modal("hide");
    });
});
